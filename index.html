<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1024">
    <title>Chrome Editor</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="dark-mode">

<div class="topbar">
    <div class="dropdown">
        <span class="cursor-pointer">File</span>
        <div class="dropdown-content">
            <a href="#" onclick="createFile()">New File</a>
            <a href="#" onclick="document.getElementById('fileInput').click()">Open File</a>
            <a href="#" onclick="saveFile()">Save</a>
            <a href="#" onclick="saveAsFile()">Save As</a>
            <a href="#" onclick="newWindow()">New Window</a>
            <a href="#" onclick="exitApp()">Exit</a>
        </div>
    </div>
    <label class="toggle-switch">
        <input type="checkbox" id="themeToggle" onchange="toggleMode()">
        <span class="slider"></span>
    </label>
</div>

<div class="editor-container">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <button id="openFileButton" onclick="document.getElementById('fileInput').click()" class="px-4 py-2 bg-blue-500 text-white font-semibold rounded shadow hover:bg-blue-600 transition hidden">Open File</button>
        <ul class="file-list" id="fileList">
            <!-- File items will be dynamically inserted here -->
        </ul>
    </div>

    <!-- Editor -->
    <div class="editor">
        <textarea id="editor" placeholder="Start typing..."></textarea>
    </div>
</div>

<input type="file" id="fileInput" class="hidden" onchange="openFile(event)" />
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const fileList = document.getElementById('fileList');
        const openFileButton = document.getElementById('openFileButton');

        const observer = new MutationObserver(() => {
            if (fileList.children.length > 0) {
                openFileButton.classList.add('hidden');
            } else {
                openFileButton.classList.remove('hidden');
            }
        });

        observer.observe(fileList, { childList: true });
    });

    function openFile(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const fileName = file.name;
                const fileList = document.getElementById('fileList');
                const li = document.createElement('li');
                li.textContent = fileName;
                li.onclick = () => loadFile(fileName, e.target.result);
                fileList.appendChild(li);
            };
            reader.readAsText(file);
        }
    }
</script>
<script src="script.js"></script>
</body>
</html>
